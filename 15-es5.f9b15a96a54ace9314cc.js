(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{L6id:function(n,e,t){"use strict";t.r(e);var i=t("CcnG"),l=function(){return function(){}}(),o=t("pMnS"),r=t("npC/"),s=t("668k"),u=t("6MRr"),a=t("DKdE"),c=t("5gP/"),p=t("oBZk"),h=t("ZZ/e"),b=function(){function n(){this.viewMore=new i.m}return n.prototype.onViewMore=function(n){this.viewMore.emit(n)},n.prototype.disable=function(){this.infiniteScroll.disabled=!0},n.prototype.enable=function(){this.infiniteScroll.disabled=!1},n}(),g=i.rb({encapsulation:0,styles:[["ion-infinite-scroll-content[_ngcontent-%COMP%]{margin-top:15px}"]],data:{}});function v(n){return i.Nb(2,[i.Jb(671088640,1,{infiniteScroll:0}),(n()(),i.tb(1,0,null,null,3,"ion-infinite-scroll",[],null,[[null,"ionInfinite"]],function(n,e,t){var i=!0;return"ionInfinite"===e&&(i=!1!==n.component.onViewMore(t)&&i),i},p.S,p.n)),i.sb(2,49152,[[1,4]],0,h.E,[i.h,i.k,i.z],null,null),(n()(),i.tb(3,0,null,0,1,"ion-infinite-scroll-content",[["loadingSpinner","crescent"],["loadingText","Loading more ..."]],null,null,null,p.R,p.o)),i.sb(4,49152,null,0,h.F,[i.h,i.k,i.z],{loadingSpinner:[0,"loadingSpinner"],loadingText:[1,"loadingText"]},null)],function(n,e){n(e,4,0,"crescent","Loading more ...")},null)}var d=t("WE+f"),f=t("aZ8m"),m=t("XOzN"),y=t("S0jo"),M=t("Zr1d"),S=t("Ip0R"),G=t("t9fZ"),w=(t("dJ3e"),t("GTMp")),C=function(){function n(n,e,t,i,l){this.dataService=n,this.headerService=e,this.loaderSerice=t,this.modalService=i,this.storageService=l,this.movies=[],this.loading=!1,this.noResults=!1,this.isGetByQuery=!1,this.isGetByGenres=!1,this.isPopular=!0,this.page=1,this.ids=[],this.query=null}return n.prototype.ngOnInit=function(){this.loaderSerice.showLoader().then(this.initPage.bind(this)),this.getGenres()},n.prototype.onTogglePopular=function(n){this.loading=!0,this.clearMovies(),this.isPopular=n,this.isGetByGenres=!1,this.isGetByQuery=!1,this.getMovies(),this.headerService.dispatch(this.isPopular?"Popular":"Upcoming")},n.prototype.onAddToFavorites=function(n){this.storageService.add(n)},n.prototype.onRemoveFromFavorites=function(n){this.storageService.remove(n)},n.prototype.onOpenGenres=function(){var n=this;this.ids.length=0,this.modalService.create("genres",{component:w.a}).then(function(){n.modalService.present("genres")})},n.prototype.onSearch=function(n){this.query=n,this.clearMovies(),this.getMoviesByQuery()},n.prototype.itemHeightFn=function(){return 200},n.prototype.onLoadMore=function(n){this.page++;var e=function(){return n.target.complete()};this.isGetByGenres?this.getMoviesByGenres(e):this.isGetByQuery?this.getMoviesByQuery(e):this.getMovies(e)},n.prototype.isExists=function(n){return this.storageService.checkExisting(n)},n.prototype.initPage=function(n){n.present(),this.headerService.dispatch("Popular"),Promise.resolve().then(this.getMovies.bind(this,function(){return n.dismiss()}))},n.prototype.getGenres=function(){var n=this;this.headerService.applyChanges$.subscribe(function(e){e.forEach(function(e){return n.ids.push(e.id)}),n.clearMovies(),n.getMoviesByGenres()})},n.prototype.getMovies=function(n){var e=this,t=this.page.toString();(this.isPopular?this.dataService.getPopular(t):this.dataService.getUpcoming(t)).pipe(Object(G.a)(1)).subscribe(function(t){e.onLoadDone(t,n)})},n.prototype.getMoviesByGenres=function(n){var e=this;this.isGetByGenres=!0,this.isGetByQuery=!1,this.loading=!0,this.dataService.getByParams(this.page.toString(),{with_genres:this.ids.join()}).pipe(Object(G.a)(1)).subscribe(function(t){e.onLoadDone(t,n)})},n.prototype.getMoviesByQuery=function(n){var e=this;this.isGetByQuery=!0,this.isGetByGenres=!1,this.loading=!0,this.dataService.getByQuery(this.page.toString(),{query:this.query}).pipe(Object(G.a)(1)).subscribe(function(t){e.onLoadDone(t,n)})},n.prototype.onLoadDone=function(n,e){var t=this;n.forEach(function(n){return t.movies.push(n)}),this.virtualScroll&&this.virtualScroll.checkEnd(),0===n.length&&this.viewMoreComponent.disable(),this.loading=!1,this.noResults=0===this.movies.length,e&&e()},n.prototype.clearMovies=function(){this.movies.length=0,this.page=1,this.viewMoreComponent&&this.viewMoreComponent.enable()},n}(),F=t("cplz"),x=t("lwos"),B=t("UYTb"),I=i.rb({encapsulation:0,styles:[["ion-text[_ngcontent-%COMP%]{text-align:center}"]],data:{}});function P(n){return i.Nb(0,[(n()(),i.tb(0,0,null,null,1,"app-loader",[],null,null,null,r.b,r.a)),i.sb(1,49152,null,0,s.a,[],null,null)],null,null)}function L(n){return i.Nb(0,[(n()(),i.tb(0,0,null,null,1,"app-movie",[],null,[[null,"addToFavorites"],[null,"removeFromFavorites"]],function(n,e,t){var i=!0,l=n.component;return"addToFavorites"===e&&(i=!1!==l.onAddToFavorites(t)&&i),"removeFromFavorites"===e&&(i=!1!==l.onRemoveFromFavorites(t)&&i),i},u.b,u.a)),i.sb(1,49152,null,0,a.a,[c.a],{movie:[0,"movie"],isExists:[1,"isExists"]},{addToFavorites:"addToFavorites",removeFromFavorites:"removeFromFavorites"})],function(n,e){n(e,1,0,e.context.$implicit,e.component.isExists(e.context.$implicit.id))},null)}function T(n){return i.Nb(0,[(n()(),i.tb(0,0,null,null,7,null,null,null,null,null,null,null)),(n()(),i.tb(1,0,null,null,6,"ion-virtual-scroll",[["approxItemHeight","200px"]],null,null,null,p.hb,p.D)),i.sb(2,835584,[[1,4]],3,h.Cb,[i.z,i.s,i.k],{approxItemHeight:[0,"approxItemHeight"],items:[1,"items"],itemHeight:[2,"itemHeight"]},null),i.Jb(335544320,3,{itmTmp:0}),i.Jb(335544320,4,{hdrTmp:0}),i.Jb(335544320,5,{ftrTmp:0}),(n()(),i.ib(16777216,null,0,1,null,L)),i.sb(7,16384,[[3,4]],0,h.Mb,[i.L,i.O],null,null)],function(n,e){var t=e.component;n(e,2,0,"200px",t.movies,t.itemHeightFn)},null)}function E(n){return i.Nb(0,[(n()(),i.tb(0,0,null,null,1,"app-view-more",[],null,[[null,"viewMore"]],function(n,e,t){var i=!0;return"viewMore"===e&&(i=!1!==n.component.onLoadMore(t)&&i),i},v,g)),i.sb(1,49152,[[2,4]],0,b,[],null,{viewMore:"viewMore"})],null,null)}function O(n){return i.Nb(0,[(n()(),i.tb(0,0,null,null,4,null,null,null,null,null,null,null)),(n()(),i.tb(1,0,null,null,3,"ion-text",[["color","primary"]],null,null,null,p.cb,p.y)),i.sb(2,49152,null,0,h.wb,[i.h,i.k,i.z],{color:[0,"color"]},null),(n()(),i.tb(3,0,null,0,1,"p",[],null,null,null,null,null)),(n()(),i.Lb(-1,null,["No results found!"]))],function(n,e){n(e,2,0,"primary")},null)}function k(n){return i.Nb(0,[i.Jb(671088640,1,{virtualScroll:0}),i.Jb(671088640,2,{viewMoreComponent:0}),(n()(),i.tb(2,0,null,null,1,"app-header",[],null,[[null,"openGenres"],[null,"toggleArrows"],[null,"searchItems"]],function(n,e,t){var i=!0,l=n.component;return"openGenres"===e&&(i=!1!==l.onOpenGenres()&&i),"toggleArrows"===e&&(i=!1!==l.onTogglePopular(t)&&i),"searchItems"===e&&(i=!1!==l.onSearch(t)&&i),i},d.b,d.a)),i.sb(3,49152,null,0,f.a,[m.a,y.a,M.a],{scrollArea:[0,"scrollArea"]},{toggleArrows:"toggleArrows",openGenres:"openGenres",searchItems:"searchItems"}),(n()(),i.tb(4,0,null,null,9,"ion-content",[["scrollEvents","true"]],null,null,null,p.M,p.i)),i.sb(5,49152,[["scrollArea",4]],0,h.u,[i.h,i.k,i.z],{scrollEvents:[0,"scrollEvents"]},null),(n()(),i.ib(16777216,null,0,1,null,P)),i.sb(7,16384,null,0,S.l,[i.O,i.L],{ngIf:[0,"ngIf"]},null),(n()(),i.ib(16777216,null,0,1,null,T)),i.sb(9,16384,null,0,S.l,[i.O,i.L],{ngIf:[0,"ngIf"]},null),(n()(),i.ib(16777216,null,0,1,null,E)),i.sb(11,16384,null,0,S.l,[i.O,i.L],{ngIf:[0,"ngIf"]},null),(n()(),i.ib(16777216,null,0,1,null,O)),i.sb(13,16384,null,0,S.l,[i.O,i.L],{ngIf:[0,"ngIf"]},null)],function(n,e){var t=e.component;n(e,3,0,i.Eb(e,5)),n(e,5,0,"true"),n(e,7,0,t.loading),n(e,9,0,t.movies.length>0),n(e,11,0,!t.noResults),n(e,13,0,t.noResults&&!t.loading)},null)}function N(n){return i.Nb(0,[(n()(),i.tb(0,0,null,null,1,"app-home",[],null,null,null,k,I)),i.sb(1,114688,null,0,C,[F.a,m.a,x.a,y.a,B.a],null,null)],function(n,e){n(e,1,0)},null)}var J=i.pb("app-home",C,N,{},{},[]),j=t("gIcY"),A=t("ZYCi"),Q=t("PCNd");t.d(e,"HomePageModuleNgFactory",function(){return R});var R=i.qb(l,[],function(n){return i.Bb([i.Cb(512,i.j,i.bb,[[8,[o.a,J]],[3,i.j],i.x]),i.Cb(4608,S.n,S.m,[i.u,[2,S.t]]),i.Cb(4608,j.g,j.g,[]),i.Cb(4608,h.a,h.a,[i.z,i.g]),i.Cb(4608,h.Gb,h.Gb,[h.a,i.j,i.q]),i.Cb(4608,h.Jb,h.Jb,[h.a,i.j,i.q]),i.Cb(1073742336,S.c,S.c,[]),i.Cb(1073742336,A.o,A.o,[[2,A.t],[2,A.m]]),i.Cb(1073742336,j.f,j.f,[]),i.Cb(1073742336,j.a,j.a,[]),i.Cb(1073742336,h.Db,h.Db,[]),i.Cb(1073742336,Q.a,Q.a,[]),i.Cb(1073742336,l,l,[]),i.Cb(1024,A.k,function(){return[[{path:"",component:C}]]},[])])})}}]);